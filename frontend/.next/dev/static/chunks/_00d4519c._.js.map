{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/babii/homework/ASP.NET/DirectoryService/frontend/shared/api/axiosInstance.ts"],"sourcesContent":["import axios from \"axios\";\n\nexport const axiosInstance = axios.create({\n    baseURL: '',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n})"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,gBAAgB,mJAAK,CAAC,MAAM,CAAC;IACtC,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/babii/homework/ASP.NET/DirectoryService/frontend/entities/departments/api/departments.api.ts"],"sourcesContent":["import { axiosInstance } from '@/shared/api/axiosInstance'\nimport {\n\tDepartment,\n\tGetChildrenLazyParams,\n\tGetParentDepartmentsParams,\n\tParentDepartment\n} from '../types/department.types'\n\nexport const departmentsApi = {\n\tgetDepartmentsTopPosition: async () => {\n\t\tconst response = await axiosInstance\n\t\t\t.get<Department[]>('http://localhost:5129/top-positions')\n\t\t\t.then(res => res.data)\n\t\t\t.catch(() => [])\n\t\treturn response\n\t},\n\tgetDepartment: async (id: string) => {\n\t\tconst response = await axiosInstance\n\t\t\t.get<ParentDepartment>(`http://localhost:5129/department/${id}`)\n\t\t\t.then(res => res.data)\n\t\t\t.catch(() => null)\n\t\treturn response\n\t},\n\tgetParentDepartments: async (params?: GetParentDepartmentsParams) => {\n\t\tconst response = await axiosInstance\n\t\t\t.get<ParentDepartment[]>('http://localhost:5129/roots', {\n\t\t\t\tparams: {\n\t\t\t\t\tpage: params?.page ?? 1,\n\t\t\t\t\tsize: params?.size ?? 20,\n\t\t\t\t\tpreferch: params?.preferch ?? 3\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(res => res.data)\n\t\t\t.catch(() => [])\n\t\treturn response\n\t},\n\tgetChildrenLazy: async (id: string, params?: GetChildrenLazyParams) => {\n\t\tconst response = await axiosInstance\n\t\t\t.get<ParentDepartment[]>(`http://localhost:5129/${id}/children`, {\n\t\t\t\tparams: {\n\t\t\t\t\tpage: params?.page ?? 1,\n\t\t\t\t\tsize: params?.size ?? 20\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(res => res.data)\n\t\t\t.catch(() => [])\n\t\treturn response\n\t}\n}\n"],"names":[],"mappings":";;;;AAAA;;AAQO,MAAM,iBAAiB;IAC7B,2BAA2B;QAC1B,MAAM,WAAW,MAAM,kJAAa,CAClC,GAAG,CAAe,uCAClB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,EACpB,KAAK,CAAC,IAAM,EAAE;QAChB,OAAO;IACR;IACA,eAAe,OAAO;QACrB,MAAM,WAAW,MAAM,kJAAa,CAClC,GAAG,CAAmB,CAAC,iCAAiC,EAAE,IAAI,EAC9D,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,EACpB,KAAK,CAAC,IAAM;QACd,OAAO;IACR;IACA,sBAAsB,OAAO;QAC5B,MAAM,WAAW,MAAM,kJAAa,CAClC,GAAG,CAAqB,+BAA+B;YACvD,QAAQ;gBACP,MAAM,QAAQ,QAAQ;gBACtB,MAAM,QAAQ,QAAQ;gBACtB,UAAU,QAAQ,YAAY;YAC/B;QACD,GACC,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,EACpB,KAAK,CAAC,IAAM,EAAE;QAChB,OAAO;IACR;IACA,iBAAiB,OAAO,IAAY;QACnC,MAAM,WAAW,MAAM,kJAAa,CAClC,GAAG,CAAqB,CAAC,sBAAsB,EAAE,GAAG,SAAS,CAAC,EAAE;YAChE,QAAQ;gBACP,MAAM,QAAQ,QAAQ;gBACtB,MAAM,QAAQ,QAAQ;YACvB;QACD,GACC,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,EACpB,KAAK,CAAC,IAAM,EAAE;QAChB,OAAO;IACR;AACD"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/babii/homework/ASP.NET/DirectoryService/frontend/app/departments/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { departmentsApi } from '@/entities/departments/api/departments.api'\nimport React from 'react'\nimport { RefreshCcw } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { ParentDepartment } from '@/entities/departments/types/department.types'\nimport { useParams } from 'next/navigation'\nimport { useQuery, useQueryClient } from '@tanstack/react-query'\nimport { DepartmentChildren } from '@/app/departments/department-children'\n\nexport default function DepartmentPage() {\n\tconst params = useParams()\n\tconst queryClientInstance = useQueryClient()\n\tconst id = params?.id as string\n\n\t// Сначала проверяем есть ли в кэше список всех департаментов\n\tconst cachedDepartments = queryClientInstance.getQueryData<\n\t\tParentDepartment[]\n\t>(['roots'])\n\tconsole.log('cachedDepartments', cachedDepartments)\n\tconst cachedDept = cachedDepartments?.find(d => d.id.toString() === id)\n\n\t// Если в кэше есть - используем его, если нет - запрашиваем с бэкэнда\n\tconst {\n\t\tdata: department,\n\t\tisLoading,\n\t\terror,\n\t\trefetch\n\t} = useQuery<ParentDepartment | null>({\n\t\tqueryKey: ['department', id],\n\t\tqueryFn: () => departmentsApi.getDepartment(id),\n\t\tinitialData: cachedDept, // Используем данные из кэша если они есть\n\t\tstaleTime: 1000 * 60 * 5 // 5 минут\n\t})\n\n\tif (isLoading && !cachedDept) {\n\t\treturn <div className='p-6'>Загрузка...</div>\n\t}\n\n\tif (error || !department) {\n\t\treturn (\n\t\t\t<div className='p-6'>\n\t\t\t\t<h1>Ошибка</h1>\n\t\t\t\t<p>{error?.message || 'Департамент не найден'}</p>\n\t\t\t</div>\n\t\t)\n\t}\n\n\treturn (\n\t\t<div className='p-6'>\n\t\t\t<div className='flex flex-row justify-between items-center'>\n\t\t\t\t<h1 className='text-4xl'>{department.name}</h1>\n\t\t\t\t<Button onClick={() => refetch()}>\n\t\t\t\t\t<RefreshCcw className='w-4 h-4' />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div className='mt-6 space-y-4'>\n\t\t\t\t<p>\n\t\t\t\t\t<span className='font-semibold'>ID:</span> {department.id}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span className='font-semibold'>Статус:</span>{' '}\n\t\t\t\t\t{department.isActive ? 'Активен' : 'Неактивен'}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span className='font-semibold'>Путь:</span>{' '}\n\t\t\t\t\t{department.path}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span className='font-semibold'>Глубина:</span>{' '}\n\t\t\t\t\t{department.depth}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span className='font-semibold'>Обновлено:</span>{' '}\n\t\t\t\t\t{department.updatedAt.toLocaleString()}\n\t\t\t\t</p>\n\n\t\t\t\t<DepartmentChildren\n\t\t\t\t\tdepartmentId={id}\n\t\t\t\t\thasMoreChildren={department.hasMoreChildren}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAEA;AACA;AAAA;;;;;;;;AARA;;;;;;;AAWe,SAAS;;IACvB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,sBAAsB,IAAA,2MAAc;IAC1C,MAAM,KAAK,QAAQ;IAEnB,6DAA6D;IAC7D,MAAM,oBAAoB,oBAAoB,YAAY,CAExD;QAAC;KAAQ;IACX,QAAQ,GAAG,CAAC,qBAAqB;IACjC,MAAM,aAAa,mBAAmB,KAAK,CAAA,IAAK,EAAE,EAAE,CAAC,QAAQ,OAAO;IAEpE,sEAAsE;IACtE,MAAM,EACL,MAAM,UAAU,EAChB,SAAS,EACT,KAAK,EACL,OAAO,EACP,GAAG,IAAA,0LAAQ,EAA0B;QACrC,UAAU;YAAC;YAAc;SAAG;QAC5B,OAAO;uCAAE,IAAM,yKAAc,CAAC,aAAa,CAAC;;QAC5C,aAAa;QACb,WAAW,OAAO,KAAK,EAAE,UAAU;IACpC;IAEA,IAAI,aAAa,CAAC,YAAY;QAC7B,qBAAO,6LAAC;YAAI,WAAU;sBAAM;;;;;;IAC7B;IAEA,IAAI,SAAS,CAAC,YAAY;QACzB,qBACC,6LAAC;YAAI,WAAU;;8BACd,6LAAC;8BAAG;;;;;;8BACJ,6LAAC;8BAAG,OAAO,WAAW;;;;;;;;;;;;IAGzB;IAEA,qBACC,6LAAC;QAAI,WAAU;;0BACd,6LAAC;gBAAI,WAAU;;kCACd,6LAAC;wBAAG,WAAU;kCAAY,WAAW,IAAI;;;;;;kCACzC,6LAAC,wIAAM;wBAAC,SAAS,IAAM;kCACtB,cAAA,6LAAC,mOAAU;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAGxB,6LAAC;gBAAI,WAAU;;kCACd,6LAAC;;0CACA,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAU;4BAAE,WAAW,EAAE;;;;;;;kCAE1D,6LAAC;;0CACA,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAe;4BAC9C,WAAW,QAAQ,GAAG,YAAY;;;;;;;kCAEpC,6LAAC;;0CACA,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAa;4BAC5C,WAAW,IAAI;;;;;;;kCAEjB,6LAAC;;0CACA,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAgB;4BAC/C,WAAW,KAAK;;;;;;;kCAElB,6LAAC;;0CACA,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAkB;4BACjD,WAAW,SAAS,CAAC,cAAc;;;;;;;kCAGrC,6LAAC;wBACA,cAAc;wBACd,iBAAiB,WAAW,eAAe;;;;;;;;;;;;;;;;;;AAKhD;GA1EwB;;QACR,kJAAS;QACI,2MAAc;QAgBtC,0LAAQ;;;KAlBW"}}]
}